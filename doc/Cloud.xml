<?xml version="1.0"?>
<?xml-stylesheet href="docbook.xsl" type="text/xsl" ?>
<book xmlns="http://docbook.org/ns/docbook" version="5.0">
  <info>
    <title>Cloud Specification</title>
    <titleabbrev>Uplink</titleabbrev>
    <releaseinfo>23.06</releaseinfo>
    <author>
      <orgname>ONVIF™</orgname>
      <uri>www.onvif.org</uri>
    </author>
    <pubdate> June, 2023</pubdate>
    <mediaobject>
      <imageobject>
        <imagedata fileref="media/logo.png" contentwidth="60mm"/>
      </imageobject>
    </mediaobject>
    <copyright>
      <year>2008-2023</year>
      <holder>ONVIF™ All rights reserved.</holder>
    </copyright>
    <legalnotice>
      <para>Recipients of this document may copy, distribute, publish, or display this document so long as this copyright notice, license and disclaimer are retained with all copies of the document. No license is granted to modify this document.</para>
      <para>THIS DOCUMENT IS PROVIDED "AS IS," AND THE CORPORATION AND ITS MEMBERS AND THEIR AFFILIATES, MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THIS DOCUMENT ARE SUITABLE FOR ANY PURPOSE; OR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ANY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.</para>
      <para>IN NO EVENT WILL THE CORPORATION OR ITS MEMBERS OR THEIR AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, PUNITIVE OR CONSEQUENTIAL DAMAGES, ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT, WHETHER OR NOT (1) THE CORPORATION, MEMBERS OR THEIR AFFILIATES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, OR (2) SUCH DAMAGES WERE REASONABLY FORESEEABLE, AND ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT.  THE FOREGOING DISCLAIMER AND LIMITATION ON LIABILITY DO NOT APPLY TO, INVALIDATE, OR LIMIT REPRESENTATIONS AND WARRANTIES MADE BY THE MEMBERS AND THEIR RESPECTIVE AFFILIATES TO THE CORPORATION AND OTHER MEMBERS IN CERTAIN WRITTEN POLICIES OF THE CORPORATION.</para>
    </legalnotice>
    <revhistory>
      <revision>
        <revnumber>23.06</revnumber>
        <date>June 2023</date>
        <author>
          <personname>Ottavio Campana</personname>
        </author>
        <revremark>First release</revremark>
      </revision>
    </revhistory>
  </info>
  <chapter>
    <title>Scope </title>
    <para>This document defines the connection protocol for connecting a web service behind a firewall to a client reachable in the internet.</para>
  </chapter>
  <chapter>
    <title>Normative references</title>
    <para>IETF RFC 5246 - The Transport Layer Security (TLS) Protocol, Version 1.2</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://tools.ietf.org/html/rfc5246"></link>&gt;</para>
    <para>IETF RFC 6125 - Representation and Verification of Domain-Based Application Service</para>
    <para> 	Identity within Internet Public Key Infrastructure Using X.509 (PKIX)</para>
    <para>	Certificates in the Context of Transport Layer Security (TLS)</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tools.ietf.org/html/rfc6125"></link>&gt; </para>
    <para>IETF RFC 7540 - Hypertext Transfer Protocol Version 2 (HTTP/2)</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tools.ietf.org/html/rfc7540"></link>&gt; </para>
    <para>IETF RFC 8441 - Bootstrapping WebSockets with HTTP/2</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tools.ietf.org/html/rfc8441"></link>&gt; </para>
    <para>ONVIF Core Specification</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.onvif.org/onvif/specs/core/ONVIF-Core-Specification.pdf"></link>&gt;</para>
    <para>ONVIF Media2 Service Specification</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.onvif.org/specs/srv/media/ONVIF-Media2-Service-Spec.pdf"></link>&gt;</para>
    <para>ONVIF Streaming Specification</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://www.onvif.org/specs/stream/ONVIF-Streaming-Spec.pdf"></link>&gt;</para>
    <para>Apple Computer Inc. RTSP over HTTP, Tunneling QuickTime RTSP and RTP over HTTP</para>
    <para role="reference">&lt;<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://opensource.apple.com/source/QuickTimeStreamingServer/QuickTimeStreamingServer-412.42/Documentation/RTSP_Over_HTTP.pdf"></link>&gt;</para>
  </chapter>
  <chapter>
    <title>Terms and Definitions</title>
    <section>
      <title>Definitions</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="24*" />
          <colspec colname="c2" colwidth="76*" />
          <tbody valign="top">
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Device Sharing</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The procedure, started by the owner of the device, to allow another Operational Cloud Service to connect to the device.</para>
              </entry>
            </row>
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Device Transfer</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The procedure, started by the owner of the device, to allow another Operational Cloud Service to connect to the device. With device transfer, the original cloud service loses access.</para>
              </entry>
            </row>
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Operational Cloud Service</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The cloud platform receiving access to the devices from a provisioning cloud service.</para>
              </entry>
            </row>
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Manufacturer Cloud Service</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The initial cloud platform, provided by the device vendor, where the user can take ownership of the devices.</para>
              </entry>
            </row>
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Provisioning Cloud Service</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The cloud platform currently managing the device and starts either device transfer or sharing.</para>
              </entry>
            </row>
            <row>
              <entry align="left">
                <para>
                  <emphasis role="bold">Uplink</emphasis>
                </para>
              </entry>
              <entry align="left">
                <para>The connection established by the local service to the remote client.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section>
      <title>Abbreviations</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="24*" />
          <colspec colname="c2" colwidth="76*" />
          <tbody valign="top">
            <row>
              <entry valign="middle">
                <para>MCS</para>
              </entry>
              <entry valign="middle">
                <para>Manufacturer Cloud Service</para>
              </entry>
            </row>
            <row>
              <entry valign="middle">
                <para>OCS</para>
              </entry>
              <entry valign="middle">
                <para>Operational Cloud Service</para>
              </entry>
            </row>
            <row>
              <entry valign="middle">
                <para>PCS</para>
              </entry>
              <entry valign="middle">
                <para>Provisioning Cloud Service</para>
              </entry>
            </row>
            <row>
              <entry valign="middle">
                <para>VMS</para>
              </entry>
              <entry valign="middle">
                <para>Video Management System</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </chapter>
  <chapter>
    <title>Overview</title>
    <para>On-boarding devices in cloud native Video Management Systems involves two major steps:</para>
    <itemizedlist>
      <listitem>
        <para>A device taken out of the box connects with its pre-programmed parameters to a Manufacturer Cloud Service (MCS), so that the user can take ownership of the device. Once the device is successfully claimed by the user, the MCS behaves as a Provisioning Cloud Service (PCS).</para>
      </listitem>
      <listitem>
        <para>The user can transfer the device from a PCS to an Operational Cloud Service (OCS), i.e. the cloud native VMS the user expects to use for his surveillance system.</para>
      </listitem>
    </itemizedlist>
    <para>N.B. that at any time, a OCS may act as a PCS.</para>
    <para>The scope of this cloud service covers only the second step, i.e. device sharing or transferring between different cloud services. The procedure outlined in these specifications can be used to share or transfer a device from a MCS to an OCS during the initial setup, but also from an old PCS to a new OCS.</para>
    <para>Figure <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="_Ref752965479"/> demonstrates the two phases. N.B. the gray rectangle visually identifies the scope of these specifications.</para>
    <figure xml:id="_Ref752965479">
      <title>Onboarding phases and ONVIF scope</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="media/Cloud/onboarding_scope.svg" contentwidth="159.97mm" />
        </imageobject>
      </mediaobject>
    </figure>
  </chapter>
  <appendix role="revhistory">
    <title>Revision History</title>
    <para />
  </appendix>
</book>
